import{j as l}from"./singletons.2f50626b.js";async function g(n,t,o){const{callbackUrl:a=window.location.href,redirect:c=!0}=t??{},e=n==="credentials",w=e||n==="email",d=`${`/auth/${e?"callback":"signin"}/${n}`}?${new URLSearchParams(o)}`,u=await fetch("/auth/csrf"),{csrfToken:f}=await u.json(),i=await fetch(d,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({...t,csrfToken:f,callbackUrl:a})}),r=await i.clone().json();if(c||!w){window.location.href=r.url??a,r.url.includes("#")&&window.location.reload();return}return i}async function p(n){const{callbackUrl:t=window.location.href}=n??{},o=await fetch("/auth/csrf"),{csrfToken:a}=await o.json(),s=(await(await fetch("/auth/signout",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({csrfToken:a,callbackUrl:t})})).json()).url??t;window.location.href=s,s.includes("#")&&window.location.reload()}const R=l("goto"),U=l("invalidate_all");export{p as a,R as g,U as i,g as s};
