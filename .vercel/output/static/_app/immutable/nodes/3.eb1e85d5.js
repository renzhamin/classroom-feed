import{i as dt,f as _t,h as ge,j as mt,r as Ve,k as Qe,s as xe,n as B,l as Xe,e as oe,o as ft,m as ne,b as pt,p as ye}from"../chunks/scheduler.433f0f0f.js";import{p as fe,t as $,b as he,d as F,S as Ce,i as Ee,g as E,m as U,s as V,C as Y,h as L,j as S,n as R,f as p,c as O,D as ee,k as a,a as N,z as i,o as ae,A as j,E as ve,B as re,F as ce,G as gt,I as vt,e as Ye,J as bt,K as wt,L as et,M as kt,r as Oe,u as Ae,v as ze,w as Be}from"../chunks/index.339c83b0.js";import{w as Ne}from"../chunks/singletons.2f50626b.js";import{i as xt,a as yt}from"../chunks/navigation.4a14f299.js";import{p as Ct}from"../chunks/stores.a608d631.js";const Et=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function be(l,e){const s=e.token={};function t(r,n,o,u){if(e.token!==s)return;e.resolved=u;let h=e.ctx;o!==void 0&&(h=h.slice(),h[o]=u);const _=r&&(e.current=r)(h);let C=!1;e.block&&(e.blocks?e.blocks.forEach((x,d)=>{d!==n&&x&&(fe(),$(x,1,1,()=>{e.blocks[d]===x&&(e.blocks[d]=null)}),he())}):e.block.d(1),_.c(),F(_,1),_.m(e.mount(),e.anchor),C=!0),e.block=_,e.blocks&&(e.blocks[n]=_),C&&mt()}if(dt(l)){const r=_t();if(l.then(n=>{ge(r),t(e.then,1,e.value,n),ge(null)},n=>{if(ge(r),t(e.catch,2,e.error,n),ge(null),!e.hasCatch)throw n}),e.current!==e.pending)return t(e.pending,0),!0}else{if(e.current!==e.then)return t(e.then,1,e.value,l),!0;e.resolved=l}}function Lt(l,e,s){const t=e.slice(),{resolved:r}=l;l.current===l.then&&(t[l.value]=r),l.current===l.catch&&(t[l.error]=r),l.block.p(t,s)}function we(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function It(l,e){$(l,1,1,()=>{e.delete(l.key)})}function Tt(l,e,s,t,r,n,o,u,h,_,C,x){let d=l.length,g=n.length,m=d;const M={};for(;m--;)M[l[m].key]=m;const y=[],b=new Map,w=new Map,c=[];for(m=g;m--;){const f=x(r,n,m),k=s(f);let T=o.get(k);T?t&&c.push(()=>T.p(f,e)):(T=_(k,f),T.c()),b.set(k,y[m]=T),k in M&&w.set(k,Math.abs(m-M[k]))}const v=new Set,I=new Set;function D(f){F(f,1),f.m(u,C),o.set(f.key,f),C=f.first,g--}for(;d&&g;){const f=y[g-1],k=l[d-1],T=f.key,P=k.key;f===k?(C=f.first,d--,g--):b.has(P)?!o.has(T)||v.has(T)?D(f):I.has(P)?d--:w.get(T)>w.get(P)?(I.add(T),D(f)):(v.add(P),d--):(h(k,o),d--)}for(;d--;){const f=l[d];b.has(f.key)||h(f,o)}for(;g;)D(y[g-1]);return Ve(c),y}function ht(l){const e=l-1;return e*e*e+1}function tt(l,{delay:e=0,duration:s=400,easing:t=ht,x:r=0,y:n=0,opacity:o=0}={}){const u=getComputedStyle(l),h=+u.opacity,_=u.transform==="none"?"":u.transform,C=h*(1-o),[x,d]=Qe(r),[g,m]=Qe(n);return{delay:e,duration:s,easing:t,css:(M,y)=>`
			transform: ${_} translate(${(1-M)*x}${d}, ${(1-M)*g}${m});
			opacity: ${h-C*y}`}}function ie(l,{delay:e=0,duration:s=400,easing:t=ht,axis:r="y"}={}){const n=getComputedStyle(l),o=+n.opacity,u=r==="y"?"height":"width",h=parseFloat(n[u]),_=r==="y"?["top","bottom"]:["left","right"],C=_.map(b=>`${b[0].toUpperCase()}${b.slice(1)}`),x=parseFloat(n[`padding${C[0]}`]),d=parseFloat(n[`padding${C[1]}`]),g=parseFloat(n[`margin${C[0]}`]),m=parseFloat(n[`margin${C[1]}`]),M=parseFloat(n[`border${C[0]}Width`]),y=parseFloat(n[`border${C[1]}Width`]);return{delay:e,duration:s,easing:t,css:b=>`overflow: hidden;opacity: ${Math.min(b*20,1)*o};${u}: ${b*h}px;padding-${_[0]}: ${b*x}px;padding-${_[1]}: ${b*d}px;margin-${_[0]}: ${b*g}px;margin-${_[1]}: ${b*m}px;border-${_[0]}-width: ${b*M}px;border-${_[1]}-width: ${b*y}px;`}}const St={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0};function Me(l){const e=new Date(l),s=Intl.DateTimeFormat().resolvedOptions().locale,t=Intl.DateTimeFormat().resolvedOptions().timeZone;return Intl.DateTimeFormat(s,{...St,timeZone:t}).format(e)}const Q={get:(l,e)=>{if(!l)return e;let s=localStorage.getItem(l);return s?JSON.parse(s):e},set:(l,e)=>{!e&&typeof e!="boolean"||e instanceof Array&&e.length==0||(e instanceof Map&&(e=[...e]),typeof e=="object"&&(e=JSON.stringify(e)),localStorage.setItem(l,e))}};async function st(l){let e="";return l.status==429?(l=await l.json(),e=`Rate limitied until ${Me(l.reset)}`):l.status==503&&(l=await l.json(),e=l.message),e}function Mt(l){let e,s,t,r,n,o=l[0].text+"",u,h,_,C,x=Me(l[0].updateTime)+"",d,g,m,M,y,b,w;return{c(){e=E("div"),s=E("h2"),t=U(l[1]),r=V(),n=E("p"),u=U(o),h=V(),_=E("div"),C=E("div"),d=U(x),g=V(),m=E("div"),M=E("a"),y=Y("svg"),b=Y("path"),this.h()},l(c){e=L(c,"DIV",{class:!0});var v=S(e);s=L(v,"H2",{class:!0});var I=S(s);t=R(I,l[1]),I.forEach(p),r=O(v),n=L(v,"P",{class:!0});var D=S(n);u=R(D,o),D.forEach(p),h=O(v),_=L(v,"DIV",{class:!0});var f=S(_);C=L(f,"DIV",{class:!0});var k=S(C);d=R(k,x),k.forEach(p),g=O(f),m=L(f,"DIV",{class:!0});var T=S(m);M=L(T,"A",{class:!0,href:!0,target:!0});var P=S(M);y=ee(P,"svg",{class:!0,xmlns:!0,viewBox:!0});var H=S(y);b=ee(H,"path",{d:!0}),S(b).forEach(p),H.forEach(p),P.forEach(p),T.forEach(p),f.forEach(p),v.forEach(p),this.h()},h(){a(s,"class","card-title"),a(n,"class","whitespace-pre-line"),a(C,"class","justify-start"),a(b,"d","M320 0c-17.7 0-32 14.3-32 32s14.3 32 32 32h82.7L201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3V192c0 17.7 14.3 32 32 32s32-14.3 32-32V32c0-17.7-14.3-32-32-32H320zM80 32C35.8 32 0 67.8 0 112V432c0 44.2 35.8 80 80 80H400c44.2 0 80-35.8 80-80V320c0-17.7-14.3-32-32-32s-32 14.3-32 32V432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V112c0-8.8 7.2-16 16-16H192c17.7 0 32-14.3 32-32s-14.3-32-32-32H80z"),a(y,"class","fill-accent hover:scale-125"),a(y,"xmlns","http://www.w3.org/2000/svg"),a(y,"viewBox","0 0 512 512"),a(M,"class","link w-4 h-4 md:scale-125"),a(M,"href",w=l[0].alternateLink),a(M,"target","_blank"),a(m,"class","card-actions justify-end ml-auto"),a(_,"class","flex"),a(e,"class","card-body")},m(c,v){N(c,e,v),i(e,s),i(s,t),i(e,r),i(e,n),i(n,u),i(e,h),i(e,_),i(_,C),i(C,d),i(_,g),i(_,m),i(m,M),i(M,y),i(y,b)},p(c,[v]){v&2&&ae(t,c[1]),v&1&&o!==(o=c[0].text+"")&&ae(u,o),v&1&&x!==(x=Me(c[0].updateTime)+"")&&ae(d,x),v&1&&w!==(w=c[0].alternateLink)&&a(M,"href",w)},i:B,o:B,d(c){c&&p(e)}}}function Dt(l,e,s){let{item:t}=e,{course_name:r}=e;return l.$$set=n=>{"item"in n&&s(0,t=n.item),"course_name"in n&&s(1,r=n.course_name)},[t,r]}class Vt extends Ce{constructor(e){super(),Ee(this,e,Dt,Mt,xe,{item:0,course_name:1})}}const De=Ne(new Map),X=Ne([]),ke=Ne(!1);function Ot(l){let e,s,t,r;return{c(){e=Y("svg"),s=Y("path"),this.h()},l(n){e=ee(n,"svg",{class:!0,xmlns:!0,viewBox:!0});var o=S(e);s=ee(o,"path",{d:!0}),S(s).forEach(p),o.forEach(p),this.h()},h(){a(s,"d","M375.7 19.7c-1.5-8-6.9-14.7-14.4-17.8s-16.1-2.2-22.8 2.4L256 61.1 173.5 4.2c-6.7-4.6-15.3-5.5-22.8-2.4s-12.9 9.8-14.4 17.8l-18.1 98.5L19.7 136.3c-8 1.5-14.7 6.9-17.8 14.4s-2.2 16.1 2.4 22.8L61.1 256 4.2 338.5c-4.6 6.7-5.5 15.3-2.4 22.8s9.8 13 17.8 14.4l98.5 18.1 18.1 98.5c1.5 8 6.9 14.7 14.4 17.8s16.1 2.2 22.8-2.4L256 450.9l82.5 56.9c6.7 4.6 15.3 5.5 22.8 2.4s12.9-9.8 14.4-17.8l18.1-98.5 98.5-18.1c8-1.5 14.7-6.9 17.8-14.4s2.2-16.1-2.4-22.8L450.9 256l56.9-82.5c4.6-6.7 5.5-15.3 2.4-22.8s-9.8-12.9-17.8-14.4l-98.5-18.1L375.7 19.7zM269.6 110l65.6-45.2 14.4 78.3c1.8 9.8 9.5 17.5 19.3 19.3l78.3 14.4L402 242.4c-5.7 8.2-5.7 19 0 27.2l45.2 65.6-78.3 14.4c-9.8 1.8-17.5 9.5-19.3 19.3l-14.4 78.3L269.6 402c-8.2-5.7-19-5.7-27.2 0l-65.6 45.2-14.4-78.3c-1.8-9.8-9.5-17.5-19.3-19.3L64.8 335.2 110 269.6c5.7-8.2 5.7-19 0-27.2L64.8 176.8l78.3-14.4c9.8-1.8 17.5-9.5 19.3-19.3l14.4-78.3L242.4 110c8.2 5.7 19 5.7 27.2 0zM256 368a112 112 0 1 0 0-224 112 112 0 1 0 0 224zM192 256a64 64 0 1 1 128 0 64 64 0 1 1 -128 0z"),a(e,"class","h-6 w-6 group-hover:fill-info"),a(e,"xmlns","http://www.w3.org/2000/svg"),a(e,"viewBox","0 0 512 512")},m(n,o){N(n,e,o),i(e,s),r=!0},i(n){r||(n&&ye(()=>{r&&(t||(t=ce(e,ie,{axis:"y"},!0)),t.run(1))}),r=!0)},o(n){n&&(t||(t=ce(e,ie,{axis:"y"},!1)),t.run(0)),r=!1},d(n){n&&p(e),n&&t&&t.end()}}}function At(l){let e,s,t,r;return{c(){e=Y("svg"),s=Y("path"),this.h()},l(n){e=ee(n,"svg",{class:!0,xmlns:!0,viewBox:!0});var o=S(e);s=ee(o,"path",{d:!0}),S(s).forEach(p),o.forEach(p),this.h()},h(){a(s,"d","M144.7 98.7c-21 34.1-33.1 74.3-33.1 117.3c0 98 62.8 181.4 150.4 211.7c-12.4 2.8-25.3 4.3-38.6 4.3C126.6 432 48 353.3 48 256c0-68.9 39.4-128.4 96.8-157.3zm62.1-66C91.1 41.2 0 137.9 0 256C0 379.7 100 480 223.5 480c47.8 0 92-15 128.4-40.6c1.9-1.3 3.7-2.7 5.5-4c4.8-3.6 9.4-7.4 13.9-11.4c2.7-2.4 5.3-4.8 7.9-7.3c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-3.7 .6-7.4 1.2-11.1 1.6c-5 .5-10.1 .9-15.3 1c-1.2 0-2.5 0-3.7 0c-.1 0-.2 0-.3 0c-96.8-.2-175.2-78.9-175.2-176c0-54.8 24.9-103.7 64.1-136c1-.9 2.1-1.7 3.2-2.6c4-3.2 8.2-6.2 12.5-9c3.1-2 6.3-4 9.6-5.8c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-3.6-.3-7.1-.5-10.7-.6c-2.7-.1-5.5-.1-8.2-.1c-3.3 0-6.5 .1-9.8 .2c-2.3 .1-4.6 .2-6.9 .4z"),a(e,"class","fill-white h-6 w-6 group-hover:fill-info"),a(e,"xmlns","http://www.w3.org/2000/svg"),a(e,"viewBox","0 0 512 512")},m(n,o){N(n,e,o),i(e,s),r=!0},i(n){r||(n&&ye(()=>{r&&(t||(t=ce(e,ie,{axis:"y"},!0)),t.run(1))}),r=!0)},o(n){n&&(t||(t=ce(e,ie,{axis:"y"},!1)),t.run(0)),r=!1},d(n){n&&p(e),n&&t&&t.end()}}}function zt(l){let e,s,t,r,n,o,u,h,_,C,x,d='<span class="normal-case text-xl mx-auto hidden md:inline">Classroom Feed</span>',g,m,M="about",y,b,w,c,v,I,D,f,k,T,P="Log Out",H,G,q,te,Fe="Are you sure you want to log out ?",Le,J,Z,je="Log Out",Ie,se,Pe="Close",Te,W,$e="<button>close</button>",Se,He;const Ue=[At,Ot],le=[];function Re(A,z){return A[0]==="dark"?0:1}return h=Re(l),_=le[h]=Ue[h](l),{c(){e=E("div"),s=E("div"),t=E("button"),r=Y("svg"),n=Y("path"),o=V(),u=E("button"),_.c(),C=V(),x=E("div"),x.innerHTML=d,g=V(),m=E("a"),m.textContent=M,y=V(),b=E("div"),w=E("label"),c=E("div"),v=E("img"),D=V(),f=E("ul"),k=E("li"),T=E("button"),T.textContent=P,H=V(),G=E("dialog"),q=E("form"),te=E("p"),te.textContent=Fe,Le=V(),J=E("div"),Z=E("button"),Z.textContent=je,Ie=V(),se=E("button"),se.textContent=Pe,Te=V(),W=E("form"),W.innerHTML=$e,this.h()},l(A){e=L(A,"DIV",{class:!0});var z=S(e);s=L(z,"DIV",{class:!0});var K=S(s);t=L(K,"BUTTON",{class:!0});var ue=S(t);r=ee(ue,"svg",{id:!0,class:!0,xmlns:!0,viewBox:!0});var Ge=S(r);n=ee(Ge,"path",{d:!0}),S(n).forEach(p),Ge.forEach(p),ue.forEach(p),o=O(K),u=L(K,"BUTTON",{class:!0});var qe=S(u);_.l(qe),qe.forEach(p),K.forEach(p),C=O(z),x=L(z,"DIV",{class:!0,"data-svelte-h":!0}),j(x)!=="svelte-10qyayu"&&(x.innerHTML=d),g=O(z),m=L(z,"A",{target:!0,href:!0,class:!0,"data-svelte-h":!0}),j(m)!=="svelte-18civ0u"&&(m.textContent=M),y=O(z),b=L(z,"DIV",{class:!0});var de=S(b);w=L(de,"LABEL",{tabindex:!0});var Je=S(w);c=L(Je,"DIV",{class:!0});var Ze=S(c);v=L(Ze,"IMG",{class:!0,src:!0,alt:!0}),Ze.forEach(p),Je.forEach(p),D=O(de),f=L(de,"UL",{tabindex:!0,class:!0});var We=S(f);k=L(We,"LI",{});var Ke=S(k);T=L(Ke,"BUTTON",{"data-svelte-h":!0}),j(T)!=="svelte-9oyede"&&(T.textContent=P),Ke.forEach(p),We.forEach(p),de.forEach(p),H=O(z),G=L(z,"DIALOG",{class:!0});var _e=S(G);q=L(_e,"FORM",{method:!0,class:!0});var me=S(q);te=L(me,"P",{class:!0,"data-svelte-h":!0}),j(te)!=="svelte-18d3zld"&&(te.textContent=Fe),Le=O(me),J=L(me,"DIV",{class:!0});var pe=S(J);Z=L(pe,"BUTTON",{class:!0,"data-svelte-h":!0}),j(Z)!=="svelte-4s13oa"&&(Z.textContent=je),Ie=O(pe),se=L(pe,"BUTTON",{class:!0,"data-svelte-h":!0}),j(se)!=="svelte-b0deoi"&&(se.textContent=Pe),pe.forEach(p),me.forEach(p),Te=O(_e),W=L(_e,"FORM",{method:!0,class:!0,"data-svelte-h":!0}),j(W)!=="svelte-9i9e7k"&&(W.innerHTML=$e),_e.forEach(p),z.forEach(p),this.h()},h(){var A;a(n,"d","M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L301.3 256 438.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z"),a(r,"id","menusvg"),a(r,"class","w-6 h-6 transition-transform group-hover:fill-info"),a(r,"xmlns","http://www.w3.org/2000/svg"),a(r,"viewBox","0 0 512 512"),ve(r,"fill-white",l[0]=="dark"),ve(r,"rotate-180",!l[2]),a(t,"class","ml-2 p-4 group"),a(u,"class","group p-4"),a(s,"class","mr-auto"),a(x,"class","mr-auto"),a(m,"target","_blank"),a(m,"href","/"),a(m,"class","btn btn-sm btn-outline"),a(v,"class","object-contain rounded-full border-2 border-base-content hover:scale-105 hover:cursor-pointer"),Xe(v.src,I=(A=l[3].data.session.user)==null?void 0:A.image)||a(v,"src",I),a(v,"alt","avatar"),a(c,"class","w-10 mx-6"),a(w,"tabindex","0"),a(f,"tabindex","0"),a(f,"class","dropdown-content z-[1] menu p-2 shadow-3xl bg-base-200 rounded-box w-52"),a(b,"class","dropdown dropdown-bottom dropdown-end"),a(te,"class","py-4 font-bold"),a(Z,"class","btn btn-error btn-outline"),a(se,"class","btn btn-success btn-outline w-28"),a(J,"class","modal-action"),a(q,"method","dialog"),a(q,"class","modal-box"),a(W,"method","dialog"),a(W,"class","modal-backdrop"),a(G,"class","modal"),a(e,"class","flex justify-center items-center sticky top-0 w-full h-[6vh] bg-base-300 z-10")},m(A,z){N(A,e,z),i(e,s),i(s,t),i(t,r),i(r,n),i(s,o),i(s,u),le[h].m(u,null),i(e,C),i(e,x),i(e,g),i(e,m),i(e,y),i(e,b),i(b,w),i(w,c),i(c,v),i(b,D),i(b,f),i(f,k),i(k,T),i(e,H),i(e,G),i(G,q),i(q,te),i(q,Le),i(q,J),i(J,Z),i(J,Ie),i(J,se),i(G,Te),i(G,W),l[8](G),Se||(He=[re(t,"click",l[5]),re(u,"click",l[4]),re(T,"click",l[6]),re(Z,"click",l[7])],Se=!0)},p(A,[z]){var ue;z&1&&ve(r,"fill-white",A[0]=="dark"),z&4&&ve(r,"rotate-180",!A[2]);let K=h;h=Re(A),h!==K&&(fe(),$(le[K],1,1,()=>{le[K]=null}),he(),_=le[h],_||(_=le[h]=Ue[h](A),_.c()),F(_,1),_.m(u,null)),z&8&&!Xe(v.src,I=(ue=A[3].data.session.user)==null?void 0:ue.image)&&a(v,"src",I)},i(A){F(_)},o(A){$(_)},d(A){A&&p(e),le[h].d(),l[8](null),Se=!1,Ve(He)}}}function Bt(l,e,s){let t,r;oe(l,ke,d=>s(2,t=d)),oe(l,Ct,d=>s(3,r=d));let n="light",o;ft(()=>{!localStorage.theme&&window.matchMedia("(prefers-color-scheme: dark)").matches?s(0,n="dark"):s(0,n=document.body.dataset.theme=localStorage.theme)});function u(){s(0,n=n=="light"?"dark":"light"),localStorage.theme=n,document.body.dataset.theme=n}const h=()=>{var d;ne(ke,t=!t,t),Q.set("sidebar_visible",t),(d=document.getElementById("menusvg"))==null||d.classList.toggle("rotate-180")},_=()=>{o==null||o.showModal()},C=()=>{xt(),yt()};function x(d){pt[d?"unshift":"push"](()=>{o=d,s(1,o)})}return[n,o,t,r,u,h,_,C,x]}class Nt extends Ce{constructor(e){super(),Ee(this,e,Bt,zt,xe,{})}}function lt(l,e,s){const t=l.slice();return t[6]=e[s][0],t[7]=e[s][1],t}function nt(l){let e,s=we(l[1]),t=[];for(let r=0;r<s.length;r+=1)t[r]=rt(lt(l,s,r));return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=Ye()},l(r){for(let n=0;n<t.length;n+=1)t[n].l(r);e=Ye()},m(r,n){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(r,n);N(r,e,n)},p(r,n){if(n&3){s=we(r[1]);let o;for(o=0;o<s.length;o+=1){const u=lt(r,s,o);t[o]?t[o].p(u,n):(t[o]=rt(u),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=s.length}},d(r){r&&p(e),bt(t,r)}}}function rt(l){let e,s,t,r=l[7].name+"",n,o,u,h,_=!1,C,x,d,g;return x=wt(l[5][0]),{c(){e=E("div"),s=E("label"),t=E("span"),n=U(r),o=V(),u=E("input"),C=V(),this.h()},l(m){e=L(m,"DIV",{class:!0});var M=S(e);s=L(M,"LABEL",{class:!0});var y=S(s);t=L(y,"SPAN",{class:!0});var b=S(t);n=R(b,r),b.forEach(p),o=O(y),u=L(y,"INPUT",{type:!0,class:!0,name:!0}),y.forEach(p),C=O(M),M.forEach(p),this.h()},h(){a(t,"class","label-text"),a(u,"type","checkbox"),u.__value=h=l[6],et(u,u.__value),a(u,"class","checkbox-xs checkbox-success"),a(u,"name","courses"),a(s,"class","cursor-pointer label"),a(e,"class","form-control"),x.p(u)},m(m,M){N(m,e,M),i(e,s),i(s,t),i(t,n),i(s,o),i(s,u),u.checked=~(l[0]||[]).indexOf(u.__value),i(e,C),d||(g=re(u,"change",l[4]),d=!0)},p(m,M){M&2&&r!==(r=m[7].name+"")&&ae(n,r),M&2&&h!==(h=m[6])&&(u.__value=h,et(u,u.__value),_=!0),(_||M&3)&&(u.checked=~(m[0]||[]).indexOf(u.__value))},d(m){m&&p(e),x.r(),d=!1,g()}}}function Ft(l){let e,s,t="Course Filters",r,n,o,u="Select All",h,_,C="Deselect All",x,d,g,m,M="Assignments",y,b,w,c,v,I=l[1]&&nt(l);return{c(){e=E("aside"),s=E("span"),s.textContent=t,r=V(),n=E("div"),o=E("button"),o.textContent=u,h=V(),_=E("button"),_.textContent=C,x=V(),d=E("div"),I&&I.c(),g=V(),m=E("a"),m.textContent=M,this.h()},l(D){e=L(D,"ASIDE",{class:!0});var f=S(e);s=L(f,"SPAN",{class:!0,"data-svelte-h":!0}),j(s)!=="svelte-iwnt9o"&&(s.textContent=t),r=O(f),n=L(f,"DIV",{class:!0});var k=S(n);o=L(k,"BUTTON",{class:!0,"data-svelte-h":!0}),j(o)!=="svelte-1gnxz2e"&&(o.textContent=u),h=O(k),_=L(k,"BUTTON",{class:!0,"data-svelte-h":!0}),j(_)!=="svelte-1841ugp"&&(_.textContent=C),k.forEach(p),x=O(f),d=L(f,"DIV",{class:!0});var T=S(d);I&&I.l(T),T.forEach(p),g=O(f),m=L(f,"A",{href:!0,target:!0,class:!0,"data-svelte-h":!0}),j(m)!=="svelte-n2hr9m"&&(m.textContent=M),f.forEach(p),this.h()},h(){a(s,"class","font-bold mb-2"),a(o,"class","btn btn-outline btn-xs flex-grow"),a(_,"class","btn btn-outline btn-xs flex-grow float-right"),a(n,"class","flex justify-between gap-2"),a(d,"class","overflow-auto w-full scroll-green px-2"),a(m,"href","https://classroom.google.com/a/not-turned-in/all"),a(m,"target","_blank"),a(m,"class","mt-auto btn btn-outline btn-sm w-full h-2"),a(e,"class","flex flex-col gap-y-2 justify-center items-center md:sticky md:top-[6vh] w-full md:w-72 max-h-[94vh] p-4 bg-base-200")},m(D,f){N(D,e,f),i(e,s),i(e,r),i(e,n),i(n,o),i(n,h),i(n,_),i(e,x),i(e,d),I&&I.m(d,null),i(e,g),i(e,m),w=!0,c||(v=[re(o,"click",l[2]),re(_,"click",l[3])],c=!0)},p(D,[f]){D[1]?I?I.p(D,f):(I=nt(D),I.c(),I.m(d,null)):I&&(I.d(1),I=null)},i(D){w||(D&&ye(()=>{w&&(b&&b.end(1),y=gt(e,tt,{x:-200,duration:500}),y.start())}),w=!0)},o(D){y&&y.invalidate(),D&&(b=vt(e,tt,{x:-200,duration:400})),w=!1},d(D){D&&p(e),I&&I.d(),D&&b&&b.end(),c=!1,Ve(v)}}}function jt(l,e,s){let t,r;oe(l,X,_=>s(0,t=_)),oe(l,De,_=>s(1,r=_));const n=[[]],o=()=>{ne(X,t=[...r.keys()],t)},u=()=>{ne(X,t=[],t)};function h(){t=kt(n[0],this.__value,this.checked),X.set(t)}return l.$$.update=()=>{l.$$.dirty&1&&Q.set("sel_courses",[...new Set(t)])},[t,r,o,u,h,n]}class Pt extends Ce{constructor(e){super(),Ee(this,e,jt,Ft,xe,{})}}const{Map:$t}=Et;function ot(l,e,s){const t=l.slice();return t[15]=e[s],t}function at(l){let e,s;return e=new Pt({}),{c(){Oe(e.$$.fragment)},l(t){Ae(e.$$.fragment,t)},m(t,r){ze(e,t,r),s=!0},i(t){s||(F(e.$$.fragment,t),s=!0)},o(t){$(e.$$.fragment,t),s=!1},d(t){Be(e,t)}}}function Ht(l){return{c:B,l:B,m:B,d:B}}function Ut(l){return{c:B,l:B,m:B,d:B}}function Rt(l){let e,s="Checking classroom enrollments";return{c(){e=E("span"),e.textContent=s,this.h()},l(t){e=L(t,"SPAN",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-z85vno"&&(e.textContent=s),this.h()},h(){a(e,"class","animate-pulse")},m(t,r){N(t,e,r)},d(t){t&&p(e)}}}function ct(l){let e,s;return{c(){e=E("span"),s=U(l[4]),this.h()},l(t){e=L(t,"SPAN",{class:!0});var r=S(e);s=R(r,l[4]),r.forEach(p),this.h()},h(){a(e,"class","text-red-500")},m(t,r){N(t,e,r),i(e,s)},p(t,r){r&16&&ae(s,t[4])},d(t){t&&p(e)}}}function it(l){let e,s="There are new posts",t,r;return{c(){e=E("span"),e.textContent=s,this.h()},l(n){e=L(n,"SPAN",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-14ze133"&&(e.textContent=s),this.h()},h(){a(e,"class","text-green-500")},m(n,o){N(n,e,o),r=!0},i(n){r||(n&&ye(()=>{r&&(t||(t=ce(e,ie,{duration:1e3},!0)),t.run(1))}),r=!0)},o(n){n&&(t||(t=ce(e,ie,{duration:1e3},!1)),t.run(0)),r=!1},d(n){n&&p(e),n&&t&&t.end()}}}function Gt(l){let e,s="<span>Failed to fetch posts</span>";return{c(){e=E("div"),e.innerHTML=s},l(t){e=L(t,"DIV",{"data-svelte-h":!0}),j(e)!=="svelte-10u05eo"&&(e.innerHTML=s)},m(t,r){N(t,e,r)},p:B,d(t){t&&p(e)}}}function qt(l){return{c:B,l:B,m:B,p:B,d:B}}function Jt(l){let e,s,t,r,n,o,u,h;function _(d,g){return d[1]>0?Wt:Zt}let C=_(l),x=C(l);return{c(){e=E("div"),s=E("span"),t=U("Fetched posts from "),r=U(l[1]),n=U(" / "),o=U(l[0]),u=U(" courses"),h=V(),x.c(),this.h()},l(d){e=L(d,"DIV",{class:!0});var g=S(e);s=L(g,"SPAN",{class:!0});var m=S(s);t=R(m,"Fetched posts from "),r=R(m,l[1]),n=R(m," / "),o=R(m,l[0]),u=R(m," courses"),m.forEach(p),h=O(g),x.l(g),g.forEach(p),this.h()},h(){a(s,"class","block"),a(e,"class","flex flex-col justify-center items-center")},m(d,g){N(d,e,g),i(e,s),i(s,t),i(s,r),i(s,n),i(s,o),i(s,u),i(e,h),x.m(e,null)},p(d,g){g&2&&ae(r,d[1]),g&1&&ae(o,d[0]),C===(C=_(d))&&x?x.p(d,g):(x.d(1),x=C(d),x&&(x.c(),x.m(e,null)))},d(d){d&&p(e),x.d()}}}function Zt(l){let e;return{c(){e=E("progress"),this.h()},l(s){e=L(s,"PROGRESS",{class:!0}),S(e).forEach(p),this.h()},h(){a(e,"class","progress progress-success w-56 md:w-72")},m(s,t){N(s,e,t)},p:B,d(s){s&&p(e)}}}function Wt(l){let e;return{c(){e=E("progress"),this.h()},l(s){e=L(s,"PROGRESS",{class:!0,max:!0}),S(e).forEach(p),this.h()},h(){a(e,"class","progress progress-success w-56 md:w-96"),e.value=l[7],a(e,"max","100")},m(s,t){N(s,e,t)},p(s,t){t&128&&(e.value=s[7])},d(s){s&&p(e)}}}function ut(l,e){let s,t,r,n;return t=new Vt({props:{item:e[15],course_name:e[9].get(e[15].courseId).name}}),{key:l,first:null,c(){s=E("div"),Oe(t.$$.fragment),r=V(),this.h()},l(o){s=L(o,"DIV",{class:!0});var u=S(s);Ae(t.$$.fragment,u),r=O(u),u.forEach(p),this.h()},h(){a(s,"class","card bg-base-100 shadow-xl shadow-base-300 my-4"),this.first=s},m(o,u){N(o,s,u),ze(t,s,null),i(s,r),n=!0},p(o,u){e=o;const h={};u&8&&(h.item=e[15]),u&520&&(h.course_name=e[9].get(e[15].courseId).name),t.$set(h)},i(o){n||(F(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){o&&p(s),Be(t)}}}function Kt(l){let e,s,t,r,n,o,u,h,_,C,x,d,g=[],m=new $t,M;e=new Nt({});let y=l[8]&&at(),b={ctx:l,current:null,token:null,hasCatch:!1,pending:Rt,then:Ut,catch:Ht};be(o=l[2],b);let w=!!l[4]&&ct(l),c=l[5]&&it(),v={ctx:l,current:null,token:null,hasCatch:!0,pending:Jt,then:qt,catch:Gt};be(C=l[6],v);let I=we(l[3]);const D=f=>f[15].id;for(let f=0;f<I.length;f+=1){let k=ot(l,I,f),T=D(k);m.set(T,g[f]=ut(T,k))}return{c(){Oe(e.$$.fragment),s=V(),t=E("main"),y&&y.c(),r=V(),n=E("div"),b.block.c(),u=V(),w&&w.c(),h=V(),c&&c.c(),_=V(),v.block.c(),x=V(),d=E("div");for(let f=0;f<g.length;f+=1)g[f].c();this.h()},l(f){Ae(e.$$.fragment,f),s=O(f),t=L(f,"MAIN",{class:!0});var k=S(t);y&&y.l(k),r=O(k),n=L(k,"DIV",{class:!0});var T=S(n);b.block.l(T),u=O(T),w&&w.l(T),h=O(T),c&&c.l(T),_=O(T),v.block.l(T),x=O(T),d=L(T,"DIV",{class:!0});var P=S(d);for(let H=0;H<g.length;H+=1)g[H].l(P);P.forEach(p),T.forEach(p),k.forEach(p),this.h()},h(){a(d,"class","w-full"),a(n,"class","flex-grow flex flex-col justify-start items-center mx-6"),a(t,"class","min-h-[94vh] flex flex-col md:flex-row")},m(f,k){ze(e,f,k),N(f,s,k),N(f,t,k),y&&y.m(t,null),i(t,r),i(t,n),b.block.m(n,b.anchor=null),b.mount=()=>n,b.anchor=u,i(n,u),w&&w.m(n,null),i(n,h),c&&c.m(n,null),i(n,_),v.block.m(n,v.anchor=null),v.mount=()=>n,v.anchor=x,i(n,x),i(n,d);for(let T=0;T<g.length;T+=1)g[T]&&g[T].m(d,null);M=!0},p(f,[k]){l=f,l[8]?y?k&256&&F(y,1):(y=at(),y.c(),F(y,1),y.m(t,r)):y&&(fe(),$(y,1,1,()=>{y=null}),he()),b.ctx=l,k&4&&o!==(o=l[2])&&be(o,b),l[4]?w?w.p(l,k):(w=ct(l),w.c(),w.m(n,h)):w&&(w.d(1),w=null),l[5]?c?k&32&&F(c,1):(c=it(),c.c(),F(c,1),c.m(n,_)):c&&(fe(),$(c,1,1,()=>{c=null}),he()),v.ctx=l,k&64&&C!==(C=l[6])&&be(C,v)||Lt(v,l,k),k&520&&(I=we(l[3]),fe(),g=Tt(g,k,D,1,l,I,m,d,It,ut,null,ot),he())},i(f){if(!M){F(e.$$.fragment,f),F(y),F(c);for(let k=0;k<I.length;k+=1)F(g[k]);M=!0}},o(f){$(e.$$.fragment,f),$(y),$(c);for(let k=0;k<g.length;k+=1)$(g[k]);M=!1},d(f){f&&(p(s),p(t)),Be(e,f),y&&y.d(),b.block.d(),b.token=null,b=null,w&&w.d(),c&&c.d(),v.block.d(),v.token=null,v=null;for(let k=0;k<g.length;k+=1)g[k].d()}}}function Qt(l,e,s){let t,r,n,o;oe(l,X,w=>s(11,r=w)),oe(l,ke,w=>s(8,n=w)),oe(l,De,w=>s(9,o=w));let u,h=[],_=[],C=0,x=0,d="",g=!1;function m(w){if(!w)return[];const c=[],v=new Set;for(const[I,D]of o)w[I]||(o.delete(I),s(0,C-=1),v.add(I));return Object.entries(w).map(I=>{const D=I[0],f=I[1];o.has(D)||(c.push(D),o.set(D,f))}),v.size&&ne(X,r=r.filter(I=>!v.has(I)),r),c.length&&(c.forEach(I=>r.push(I)),X.set(r)),(v.size||c.length)&&Q.set("course_map",o),c}async function M(w){try{let c=await fetch(`/api/posts/${w}`);if(!c.ok){s(4,d=await st(c));return}c=await c.json(),c.updated==!0&&(s(5,g=!0),setTimeout(()=>s(5,g=!1),4e3));const v=c.data;s(10,h=h==null?void 0:h.filter(I=>!v.find(D=>D.id===I.id))),s(10,h=h.concat(v)),s(10,h=h.sort((I,D)=>I.updateTime<D.updateTime?1:-1)),s(1,x+=1)}catch(c){console.error(c)}}function y(w){const c=[];return w.forEach(v=>{c.push(M(v))}),c}let b;return ft(()=>{s(10,h=Q.get("all_posts",[]));const w=Q.get("course_map");if(w){ne(De,o=new Map(w),o);const c=[...o.keys()];s(0,C=c.length),ne(X,r=Q.get("sel_courses",!1)||c,r),s(6,b=Promise.allSettled(y(c)))}s(2,u=fetch("/api/courses").then(c=>{if(!c.ok)throw st(c).then(v=>s(4,d=v)),new Error("fetching courses failed");return c}).then(c=>c.json()).then(c=>{if(!c.data)return;const v=m(c.data);s(0,C=o.size),v.length&&(s(6,b=Promise.allSettled(y(v))),b.then(()=>{h!=null&&h.length&&Q.set("all_posts",h)}))}).catch(c=>{console.error(c)})),ne(ke,n=Q.get("sidebar_visible",!0),n)}),l.$$.update=()=>{if(l.$$.dirty&3&&s(7,t=~~(x/C*100)),l.$$.dirty&3072&&h!=null&&h.length){const w=new Set(r);s(3,_=h.filter(c=>w.has(c.courseId)))}},[C,x,u,_,d,g,b,t,n,o,h,r]}class ls extends Ce{constructor(e){super(),Ee(this,e,Qt,Kt,xe,{})}}export{ls as component};
